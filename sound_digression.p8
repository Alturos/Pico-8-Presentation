pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- a sound digression
-- bright moth games

function _init()
	menuitem(1, "next demo", loadnextdemo)
end
-- a sequence of the allowable note colours
cols = {1,2,3,8,9,10,11,12,13,14,15}
-- a sequence to track the positions
ys={48,48,48,48,48}
-- a frame counter
frames=0
-- a sequence to track each notes colour
palofs={1,4,8,12,15}
-- index of the current note
col = 1
function _update()
	-- each frame we bounce one note,
	-- change its colour then move to the next
	frames += 1
	if(frames < 2) then ys[col] -= 1
	elseif(frames < 6) then ys[col] +=1
	elseif(frames <= 8) then ys[col] -=1 end
	
	if(frames == 5 or frames == 6) palofs[col] = 5
	if(frames == 7) palofs[col] = cols[1 + flr(rnd(#cols))]
	if(frames > 8) frames = 0 col += 1
	if(col > 5) col = 1
end

function _draw()
	cls()
	-- draw all the notes, 
	-- using the tracked position and colour
	-- pal is used to swap the index of a colour to another colour.
	pal(8, palofs[1] % 16)
	spr(0, 24, ys[1] + 6, 2, 2)
	pal(8, palofs[2] % 16)
	spr(0, 40, ys[2] + 2, 2, 2)
	pal(8, palofs[3] % 16)
	spr(0, 56, ys[3] + 4, 2, 2)
	pal(8, palofs[4] % 16)
	spr(0, 72, ys[4] + 2, 2, 2)
	pal(8, palofs[5] % 16)
	spr(0, 88, ys[5] + 6, 2, 2)
	
	pal()
	print("a sound digression", 56, 122, 7)
end
-->8
function loadnextdemo()
	load('sounds.p8', 'previous demo')	
end
__gfx__
00000000077800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000788888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000885588800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880055880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888887880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08888888780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888850000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
58888888850000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05888888500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0104000300530003100c1330050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500
011000002475023751217511f75118750177511575113751000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012b00000c0500e050100501105013050150501705018050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012b00000c1500e150101501115013150151501715018150001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100
012b00000c2500e250102501125013250152501725018250002000020000200002000020000200002000020000200002000020000200002000020000200002000020000200002000020000200002000020000200
012b00000c3500e350103501135013350153501735018350003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300
012b00000c4500e450104501145013450154501745018450004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400
012b00000c5500e550105501155013550155501755018550005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500
012b00000c6500e650106501165013650156501765018650006000060000600006000060000600006000060000600006000060000600006000060000600006000060000600006000060000600006000060000600
012b00000c7500e750107501175013750157501775018750007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700
010f00000c7500e751107511175113751157511775118751000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
013000000c7520e752107521175213752157521775218752000020000200002000020000200002000020000200002000020000200002000020000200002000020000200002000020000200002000020000200002
012b00000c0530e053100531105313053150531705318053000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003
011a00000c7540e754107541175413754157541775418754000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004
011a00000c7550e755107551175513755157551775518755000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005
013000000c7560e756107561175613756157561775618756000060000600006000060000600006000060000600006000060000600006000060000600006000060000600006000060000600006000060000600006
013000000c7570e757107571175713757157571775718757000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007
0124000018853188531a8531a8531c8531c8531d8531d853000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000000c9570c9570e9570e95710957109571195711957139571395715957159571795717957189571895700007000070000700007000070000700007000070000700007000070000700007000070000700007
013000000c9570c9570e9570e95710957109571195711957139571395715957159571795717957189571895700007000070000700007000070000700007000070000700007000070000700007000070000700007
013000000c9500e950109501195013950159501795018950009000090000900009000090000900009000090000900009000090000900009000090000900009000090000900009000090000900009000090000900
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012b00000c0500e050100501105013050150501705018050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
